# 佔位符與標記符號說明

本文檔說明應用程式中支援的所有佔位符和標記符號的功能與用法。

## 一、圖片相關標記

### 1. `@@` - 圖片佔位符（自動推斷）

**格式：** `@@`

**功能：**
- 自動根據題目上下文推斷圖片檔名
- 推斷規則：
  - **題目圖片**：`{題號}Q{序號}.png`（例如：第 45 題的第一張圖片 → `45Q1.png`）
  - **選項圖片**：`{題號}{選項}{序號}.png`（例如：第 45 題選項 A 的第一張圖片 → `45A1.png`）
- 圖片路徑格式：`assets/images/{testName}/{subject}/{series_no}/{檔名}`

**使用範例：**
```json
{
  "Q": "參考附圖程式碼@@. 事件 A：擲出偶數",
  "A": "@@",
  "B": "@@",
  "C": "@@",
  "D": "@@"
}
```

**說明：**
- 題目中的 `@@` 會自動推斷為 `45Q1.png`（假設是第 45 題）
- 選項中的 `@@` 會自動推斷為 `45A1.png`, `45B1.png` 等

---

### 2. `@@圖片檔名@@` - 明確指定圖片檔名

**格式：** `@@圖片檔名@@`

**功能：**
- 明確指定圖片檔名，不使用自動推斷
- 支援本地圖片檔名（如：`41Q1.png`, `45A1.png`）
- 支援網路圖片 URL（如：`https://example.com/image.png`）

**使用範例：**
```json
{
  "Q": "參考附圖程式碼@@41Q1.png@@. 事件 A：擲出偶數",
  "A": "@@45A1.png@@",
  "B": "@@45B1.png@@"
}
```

**說明：**
- `@@41Q1.png@@` 會載入 `assets/images/IPAS_02/L23/11411/41Q1.png`
- `@@https://example.com/image.png@@` 會從網路載入圖片

---

## 二、文字格式標記

### 3. `**文字**` - 粗體文字

**格式：** `**文字**`

**功能：**
- 將文字顯示為粗體
- 類似 Markdown 的粗體語法

**使用範例：**
```json
{
  "Q": "以下哪一項是**三個**主要類型之一？"
}
```

**顯示效果：**
- 以下哪一項是**三個**主要類型之一？

---

### 4. `` `文字` `` - 內聯程式碼

**格式：** `` `文字` ``

**功能：**
- 將文字顯示為等寬字體（程式碼風格）
- 用於顯示程式碼片段、變數名稱等
- 類似 Markdown 的內聯程式碼語法

**使用範例：**
```json
{
  "Q": "使用 `A_and_B.sum()` 來計算交集"
}
```

**顯示效果：**
- 使用 `A_and_B.sum()` 來計算交集

---

### 5. ` ```文字``` ` - 程式碼區塊

**格式：** ` ```程式碼內容``` `

**功能：**
- 顯示多行程式碼區塊
- 使用等寬字體，保留換行和空格
- 類似 Markdown 的程式碼區塊語法

**使用範例：**
```json
{
  "Q": "以下程式碼的輸出是什麼？\n```\nfor i in range(5):\n    print(i)\n```"
}
```

**顯示效果：**
```
以下程式碼的輸出是什麼？
for i in range(5):
    print(i)
```

---

## 三、題組與背景標記

### 6. `## 背景 ##` - 題目背景分隔符（可展開/收起）

**格式：** `## 背景 ##`

**功能：**
- 分隔題目的背景資訊和題目內容
- 背景資訊會顯示在題目上方
- 用於題組題目，多題共用同一背景
- **展開/收起功能**：
  - **複習頁面（ReviewQuizScreen）**：題組的後續題目會顯示「▶ 顯示背景說明」按鈕，點擊可展開/收起背景
  - **作答頁面（QuizScreen）**：背景只在第一題自動顯示，後續題目顯示提示文字（可點擊跳轉到第一題）

**使用範例：**
```json
{
  "Q": "## VGG16 是由牛津大學提出的經典卷積神經網路架構。請根據此資訊回答 42~45 題。## ##42. 在 VGG16 中，下列何者的參數量最多？"
}
```

**說明：**
- `## 背景 ##` 之前是背景資訊
- `## 背景 ##` 之後是題目內容
- 系統會自動識別題組（檢查背景中是否包含「請根據此資訊回答 X~Y 題」）
- **題組顯示規則**：
  - 第一題：背景自動顯示
  - 後續題目（複習頁面）：顯示「▶ 顯示背景說明」按鈕，可展開/收起
  - 後續題目（作答頁面）：顯示「📖 背景說明請參閱第X題（點擊跳轉）」提示

---

### 7. `##文字##` - 前情提要標記

**格式：** `##文字##`

**功能：**
- 標記前情提要或上下文資訊
- 與 `## 背景 ##` 不同，這是用於題目內容中的上下文說明
- 會以特殊樣式顯示（通常為灰色背景或斜體）

**使用範例：**
```json
{
  "Q": "## 假設您已經載入了預訓練模型 ## 請問下列何者正確？"
}
```

**顯示效果：**
- 前情提要會以特殊樣式顯示，與題目正文區分

---

## 四、總結表格

| 標記 | 格式 | 功能 | 使用場景 |
|------|------|------|----------|
| `@@` | `@@` | 圖片佔位符（自動推斷） | 題目或選項中需要圖片時 |
| `@@檔名@@` | `@@41Q1.png@@` | 明確指定圖片檔名 | 需要指定特定圖片時 |
| `**文字**` | `**粗體**` | 粗體文字 | 強調重要文字 |
| `` `文字` `` | `` `程式碼` `` | 內聯程式碼 | 顯示變數、函數名稱 |
| ` ```文字``` ` | ` ```多行程式碼``` ` | 程式碼區塊 | 顯示完整程式碼 |
| `## 背景 ##` | `## 背景 ##` | 背景分隔符（可展開/收起） | 題組題目的背景資訊 |
| `##文字##` | `##前情提要##` | 前情提要標記 | 題目中的上下文說明 |

---

## 五、注意事項

1. **圖片推斷規則：**
   - 題目中的第一個 `@@` → `{題號}Q1.png`
   - 題目中的第二個 `@@` → `{題號}Q2.png`
   - 選項 A 中的 `@@` → `{題號}A1.png`
   - 選項 B 中的 `@@` → `{題號}B1.png`
   - 以此類推...

2. **標記優先級：**
   - 程式碼區塊（` ``` ``` `）內的標記不會被解析
   - 前情提要（`## ##`）內的標記不會被解析
   - 避免在這些區域內使用其他標記

3. **相容性：**
   - 所有標記都支援新舊格式（`Id`/`id`, `Q`/`content`, `Exp`/`exp`）
   - 標記可以在題目（`Q`）、選項（`A`, `B`, `C`, `D`）、詳解（`Exp`）中使用

---

## 六、實際範例

### 完整題目範例：

```json
{
  "Id": "45",
  "Q": "## VGG16 是由牛津大學提出的經典卷積神經網路架構。## @@ ##45. 在實務應用中，我們常使用**遷移學習**技巧，假設你要對 VGG16 進行遷移學習，希望凍結卷積層的參數，只訓練最後全連接層。下列哪段程式碼寫法正確？",
  "A": "@@",
  "B": "@@",
  "C": "@@",
  "D": "@@",
  "Ans": "B",
  "Exp": "正確答案是 B。使用 `model.features.requires_grad = False` 可以凍結卷積層。```\nfor param in model.features.parameters():\n    param.requires_grad = False\n```"
}
```

**說明：**
- `## 背景 ##` 分隔背景和題目
- `@@` 自動推斷為 `45Q1.png`
- `**遷移學習**` 顯示為粗體
- 選項中的 `@@` 自動推斷為 `45A1.png`, `45B1.png` 等
- 詳解中的 `` `model.features.requires_grad` `` 顯示為程式碼
- 詳解中的 ` ```程式碼``` ` 顯示為程式碼區塊

